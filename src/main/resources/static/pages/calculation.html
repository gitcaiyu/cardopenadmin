<div>
    <form class="layui-form">
        <a class="layui-btn layui-btn-normal" @click="add()">
            <i class="layui-icon"></i> 创建测算</a>
        <div class="layui-input-inline ml10">
            <input type="text" name="" value="" placeholder="请输入测算名称" autocomplete="off" class="layui-input" v-model="keyword">
        </div>
        <div class="layui-input-inline ml10">
            <a class="layui-btn layui-btn-normal" @click="search()">立即查询</a>
            <a class="layui-btn layui-btn-primary" @click="searchReset()">重置</a>
        </div>
    </form>
    <div class="layui-form">
        <div>
            <table class="layui-table">
                <colgroup>
                    <col width="200">
                    <col width="100">
                    <col width="170">
                    <col width="200">
                    <col width="200">
                    <col width="100">
                    <col width="100">
                    <col width="100">
                    <col width="100">
                    <col width="100">
                    <col width="100">
                    <col width="100">
                    <col>
                    <col width="200">
                </colgroup>
                <thead>
                <tr>
                    <th>测算名称</th>
                    <th>创建时间</th>
                    <th>总投入</th>
                    <th>件均</th>
                    <th>关联大类</th>
                    <!--<th>产品收益率</th>-->
                    <th>营业利润</th>
                    <th>收入利润率</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="(item,index) in calculation_list" v-bink::key="index">
                    <td>{{item.NAME}}</td>
                    <td>{{item.CREATE_DATE}}</td>
                    <td>{{item.INPUT_AMOUNT}}</td>
                    <td>{{item.AVE_AMOUNT}}</td>
                    <td>{{item.CPNAME}}</td>
                   <!-- <td>{{item.INCOMT_RATE}}</td>-->
                    <td>{{item.PROFIT}}</td>
                    <td>{{item.INCOME_RATE}}</td>
                    <td>
                        <a class="layui-btn layui-btn-sm layui-btn-normal" @click="edit(item.ID)" href="javascript:">重新测算</a>
                        <a class="layui-btn layui-btn-danger layui-btn-sm" @click="del(item.ID)" href="javascript:">删除</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div id="page"></div>
    </div>

    <form class="layui-form mt20" id="calAdd" style="display: none">
        <div>
            <div class="layui-form-item part">
                <div class="layui-inline">
                    <label class="layui-form-label">名称</label>
                    <div class="layui-input-inline">
                        <input v-bind:class="{'inner-required':is_NAME}" v-on:input="SelectBigPro()" type="text" name="" lay-verify="required" placeholder="" autocomplete="off" maxlength="50" class="layui-input" v-model="form_data.NAME">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">投放金额</label>
                    <div class="layui-input-inline">
                        <input v-bind:class="{'inner-required':is_INPUT_AMOUNT}" v-on:input="SelectBigPro()" type="text" name="" lay-verify="required|number|checkInputAmount|checkPosNum" autocomplete="off" placeholder="" maxlength="12" class="layui-input" v-model="form_data.INPUT_AMOUNT">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">件均</label>
                    <div class="layui-input-inline">
                        <input v-bind:class="{'inner-required':is_AVE_AMOUNT}" v-on:input="SelectBigPro()" type="text" name="" lay-verify="required|number|checkPosNum" autocomplete="off" placeholder="" class="layui-input" maxlength="12" v-model="form_data.AVE_AMOUNT">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">参照历史产品</label>
                    <div class="layui-input-inline">
                        <select name="bigPro" lay-verify="" lay-filter="bigPro" v-model="form_data.CPCODE">
                            <option value=""></option>
                            <option v-for="bigPro in select_data.bigPro" v-bind:value="bigPro.pro_ID">{{bigPro.pro_NAME}}</option>
                        </select>
                    </div>
                </div>
                <table class="cost-table">
                    <colgroup>
                        <col width="300">
                        <col width="450">
                        <col width="320">
                        <col width="320">
                    </colgroup>
                    <thead>
                    <tr>
                        <th width="220px" class="solid-pay">固定成本</th>
                        <th width="800px" colspan="3">变动成本</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="solid-pay">
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">风险模型成本</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX23" lay-verify="required|number|checkPercent" placeholder="" autocomplete="off" maxlength="8" class="layui-input" v-model="EX23.INPUT_VALUE">
                                    </div>
                                    <div class="layui-form-mid layui-word-aux">%</div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">运营成本</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX31" lay-verify="required|number|checkPercent" placeholder="" autocomplete="off" maxlength="8" class="layui-input" v-model="EX31.INPUT_VALUE">
                                    </div>
                                    <div class="layui-form-mid layui-word-aux">%</div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">IT系统成本</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX32" lay-verify="required|number|checkPercent" placeholder="" autocomplete="off" maxlength="8" class="layui-input" v-model="EX32.INPUT_VALUE">
                                    </div>
                                    <div class="layui-form-mid layui-word-aux">%</div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">市场费用</label>
                                    <div class="layui-input-inline">
                                        <select lay-filter="EX11_type" name="EX11_type" v-model="EX11.TYPE">
                                            <option value="02" selected>金额</option>
                                            <option value="01">占比</option>
                                        </select>
                                    </div>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX11" v-bind:lay-verify="check_EX11_percent" placeholder="" autocomplete="off" class="layui-input" maxlength="8" v-model="EX11.INPUT_VALUE">
                                    </div>
                                    <div v-show="!is_EX11" class="layui-form-mid layui-word-aux">%</div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">渠道费用</label>
                                    <div class="layui-input-inline">
                                        <select name="EX12_type" lay-filter="EX12_type" v-model="EX12.TYPE">
                                            <option value="01" selected>投放占比</option>
                                            <option value="03">收入占比</option>
                                        </select>
                                    </div>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX12" lay-verify="required|number|checkPercent" placeholder="" autocomplete="off" maxlength="8" class="layui-input" v-model="EX12.INPUT_VALUE">
                                    </div>
                                    <div class="layui-form-mid layui-word-aux">%</div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">业务人工成本</label>
                                    <div class="layui-input-inline">
                                        <select lay-filter="EX13_type" name="EX13_type" v-model="EX13.TYPE">
                                            <option value="02" selected>金额</option>
                                            <option value="01">占比</option>
                                        </select>
                                    </div>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX13" v-bind:lay-verify="check_EX13_percent" maxlength="8" placeholder="" autocomplete="off" class="layui-input" v-model="EX13.INPUT_VALUE">
                                    </div>
                                    <div v-show="!is_EX13" class="layui-form-mid layui-word-aux">%</div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">业务人员其他成本</label>
                                    <div class="layui-input-inline">
                                        <select lay-filter="EX14_type" name="EX14_type" v-model="EX14.TYPE">
                                            <option value="02" selected>金额</option>
                                            <option value="01">占比</option>
                                        </select>
                                    </div>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX14" v-bind:lay-verify="check_EX14_percent" maxlength="8" placeholder="" autocomplete="off" class="layui-input" v-model="EX14.INPUT_VALUE">
                                    </div>
                                    <div v-show="!is_EX14" class="layui-form-mid layui-word-aux">%</div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">电话营销</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX10" lay-verify="required|number|checkPercent" placeholder="" autocomplete="off" maxlength="8" class="layui-input" v-model="EX10.INPUT_VALUE">
                                    </div>
                                    <div class="layui-form-mid layui-word-aux">%</div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">信审数据成本</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX15" lay-verify="required|number|checkPosNum" placeholder="" autocomplete="off" maxlength="8" class="layui-input" v-model="EX15.INPUT_VALUE">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">收支成本</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX17" lay-verify="required|number|checkPosNum" placeholder="" autocomplete="off" maxlength="8" class="layui-input" v-model="EX17.INPUT_VALUE">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">资金成本</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX18" lay-verify="required|number|checkPercent" placeholder="" autocomplete="off" maxlength="8" class="layui-input" v-model="EX18.INPUT_VALUE">
                                    </div>
                                    <div class="layui-form-mid layui-word-aux">%</div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">部门运营成本</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX21" lay-verify="required|number|checkPercent" placeholder="" autocomplete="off" maxlength="8" class="layui-input" v-model="EX21.INPUT_VALUE">
                                    </div>
                                    <div class="layui-form-mid layui-word-aux">%</div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline">
                                    <label class="layui-form-label">资产减值损失</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="EX22" lay-verify="required|number|checkPercent" placeholder="" autocomplete="off" maxlength="8" class="layui-input" v-model="EX52.INPUT_VALUE">
                                    </div>
                                    <div class="layui-form-mid layui-word-aux">%</div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="layui-form-item part layui-form" lay-filter="installmentAdd">
                <div class="layui-form-item btns">
                    <a class="layui-btn layui-btn-normal layui-btn-sm" @click="initInstallmentAdd()">新增</a>
                </div>
                <div class="layui-form-item opra-block">
                    <div>
                        <table class="layui-table">
                            <thead>
                            <tr>
                                <th>期限类型</th>
                                <th>期数</th>
                                <th>占比（%）</th>
                                <th>还款日类型</th>
                                <th>扣款日</th>
                                <th>利息利率</th>
                                <!-- <th>还款间隔单位</th> -->
                                <th>还款间隔</th>
                                <th>还款方式</th>

                                <th width="70">费用</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr  v-show="addInstallmentNew">
                                <td>
                                    <div v-bind:class="{'inner-required':is_required&&is_tnrTyp}">
                                        <select name="tnrTyp" v-model="installment_item.tnrTyp" lay-filter="tnrTyp">
                                            <option value=""></option>
                                            <option v-for="TNR_TYP in select_data.TNR_TYP" v-bind:value="TNR_TYP.PARAM_CODE">{{TNR_TYP.PARAM_NAME}}</option>
                                        </select>

                                    </div>

                                </td>
                                <td>
                                    <div v-bind:class="{'inner-required':is_required&&is_tnr}">
                                        <input  v-on:input="installmentRequired()" type="number" name="" maxlength="8" class="layui-input" v-model="installment_item.tnr">
                                    </div>
                                </td>
                                <td>
                                    <div v-bind:class="{'inner-required':is_required&&is_proportion}">
                                        <input  v-on:input="installmentRequired()" type="number" name="" maxlength="8" class="layui-input" v-model="installment_item.proportion">
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <select name="duedayTyp" v-model="installment_item.duedayTyp" lay-filter="duedayTyp">
                                            <option v-for="duedayTyp in duedayTyp_list" :value="duedayTyp.value">{{duedayTyp.name}}</option>
                                        </select>
                                    </div>
                                </td>
                                <td>
                                    <div v-bind:class="{'inner-required':is_required&&is_dueday}">
                                        <input  v-on:input="installmentRequired()" type="number" name="dueday" maxlength="8" class="layui-input" v-model="installment_item.dueday">
                                    </div>
                                </td>
                                <td>
                                    <div v-bind:class="{'inner-required':is_required&&is_loanIntRate}">
                                        <input  v-on:input="installmentRequired()" type="number" name="" maxlength="8" class="layui-input" v-model="installment_item.loanIntRate">
                                    </div>
                                </td>
                                <!-- <td>
                                    <div v-bind:class="{'inner-required':is_required&&is_paymFreqUnit}">
                                        <select name="paymFreqUnit" v-model="installment_item.paymFreqUnit" lay-filter="paymFreqUnit">
                                            <option value=""></option>
                                            <option v-for="FREQ_UNIT in select_data.FREQ_UNIT" v-bind:value="FREQ_UNIT.PARAM_CODE">{{FREQ_UNIT.PARAM_NAME}}</option>
                                        </select>
                                    </div>
                                </td> -->
                                <td>
                                    <div v-bind:class="{'inner-required':is_required&&is_paymFreqFreq}">
                                        <input  v-on:input="installmentRequired()" type="number" name="" maxlength="8" class="layui-input" v-model="installment_item.paymFreqFreq">
                                    </div>
                                </td>

                                <td>
                                    <div v-bind:class="{'inner-required':is_required&&is_loanPaymMtd}">
                                        <select name="loanPaymMtd" v-model="installment_item.loanPaymMtd" lay-filter="loanPaymMtd">
                                            <option value=""></option>
                                            <option v-for="LOAN_MTD in select_data.LOAN_MTD" v-bind:value="LOAN_MTD.PARAM_CODE">{{LOAN_MTD.PARAM_NAME}}</option>
                                        </select>
                                    </div>
                                </td>


                                <td >
                                    <div class="text-center">
                                        <a @click="selectFee()">请选择</a>
                                    </div>
                                </td>
                                <td>
                                    <div class="text-center">
                                        <a class="layui-btn layui-btn-normal layui-btn-sm" @click="installmentSave()">保存</a>
                                    </div>
                                </td>
                            </tr>
                            <tr class="text-center" v-for="item in installments">
                                <td>
                                    <div v-show="item.show" v-bind:class="{'inner-required':is_required&&is_tnrTyp}">
                                        <select name="tnrTyp" v-model="item.tnrTyp" lay-filter="tnrTyp">
                                            <option value=""></option>
                                            <option v-for="TNR_TYP in select_data.TNR_TYP" v-bind:value="TNR_TYP.PARAM_CODE">{{TNR_TYP.PARAM_NAME}}</option>
                                        </select>
                                    </div>
                                    <div v-show="!item.show">{{showSelectName(item,'tnrTyp')}}</div>
                                </td>
                               <!--
                               <td>
                                    <div v-show="item.show" v-bind:class="{'inner-required':is_required&&is_loanPaymMtd}">
                                        <select v-model="item.loanPaymMtd" lay-filter="loanPaymMtd">
                                            <option value=""></option>
                                            <option v-for="LOAN_MTD in select_data.LOAN_MTD" v-bind:value="LOAN_MTD.PARAM_CODE">{{LOAN_MTD.PARAM_NAME}}</option>
                                        </select>
                                    </div>
                                    <div v-show="!item.show">{{showSelectName(item,'loanPaymMtd')}}</div>
                                </td>
                                -->
                                <td>
                                    <div v-show="item.show" v-bind:class="{'inner-required':is_required&&is_tnr}">
                                        <input  v-on:input="installmentRequired(item)" type="number" maxlength="8" name="" class="layui-input" v-model="item.tnr">
                                    </div>
                                    <div v-show="!item.show">{{item.tnr}}</div>
                                </td>
                                <td>
                                    <div v-show="item.show" v-bind:class="{'inner-required':is_required&&is_proportion}">
                                        <input  v-on:input="installmentRequired(item)" type="number" maxlength="8" name="" class="layui-input" v-model="item.proportion">
                                    </div>
                                    <div v-show="!item.show">{{item.proportion}}</div>
                                </td>
                                <td>
                                    <div v-show="item.show">
                                        <select name="duedayTyp" v-model="item.duedayTyp" lay-filter="duedayTyp">
                                            <option v-for="duedayTyp in duedayTyp_list" :value="duedayTyp.value">{{duedayTyp.name}}</option>
                                        </select>
                                    </div>
                                    <div v-show="!item.show">{{showDuedayTyp(item)}}</div>
                                </td>
                                <td>
                                    <div v-show="item.show" v-bind:class="{'inner-required':is_required&&is_dueday}">
                                        <input  v-on:input="installmentRequired(item)" type="number" maxlength="8" name="dueday" class="layui-input" v-model="item.dueday">
                                    </div>
                                    <div v-show="!item.show">{{item.dueday}}</div>
                                </td>
                                <td>
                                    <div v-show="item.show" v-bind:class="{'inner-required':is_required&&is_loanIntRate}">
                                        <input v-on:input="installmentRequired(item)" type="number" maxlength="8" name="" class="layui-input" v-model="item.loanIntRate">
                                    </div>
                                    <div v-show="!item.show">{{item.loanIntRate}}</div>
                                </td>
                                <!-- <td>
                                    <div v-show="item.show" v-bind:class="{'inner-required':is_required&&is_paymFreqUnit}">
                                        <select v-model="item.paymFreqUnit" lay-filter="paymFreqUnit">
                                            <option value=""></option>
                                            <option v-for="FREQ_UNIT in select_data.FREQ_UNIT" v-bind:value="FREQ_UNIT.PARAM_CODE">{{FREQ_UNIT.PARAM_NAME}}</option>
                                        </select>
                                    </div>
                                    <div v-show="!item.show">{{showSelectName(item,'paymFreqUnit')}}</div>
                                </td> -->
                                <td>
                                    <div v-show="item.show" v-bind:class="{'inner-required':is_required&&is_paymFreqFreq}">
                                        <input v-on:input="installmentRequired(item)" type="number" maxlength="8" name="" class="layui-input" v-model="item.paymFreqFreq">
                                    </div>
                                    <div v-show="!item.show">{{item.paymFreqFreq}}</div>
                                </td>
                                <td>
                                    <div v-show="item.show" v-bind:class="{'inner-required':is_required&&is_loanPaymMtd}">
                                        <select v-model="item.loanPaymMtd" lay-filter="loanPaymMtd">
                                            <option value=""></option>
                                            <option v-for="LOAN_MTD in select_data.LOAN_MTD" v-bind:value="LOAN_MTD.PARAM_CODE">{{LOAN_MTD.PARAM_NAME}}</option>
                                        </select>
                                    </div>
                                    <div v-show="!item.show">{{showSelectName(item,'loanPaymMtd')}}</div>
                                </td>
                                <!--
                                <td>
                                    <div v-show="item.show" v-bind:class="{'inner-required':is_required&&is_tnrTyp}">
                                        <select name="tnrTyp" v-model="item.tnrTyp" lay-filter="tnrTyp">
                                            <option value=""></option>
                                            <option v-for="TNR_TYP in select_data.TNR_TYP" v-bind:value="TNR_TYP.PARAM_CODE">{{TNR_TYP.PARAM_NAME}}</option>
                                        </select>
                                    </div>
                                    <div v-show="!item.show">{{showSelectName(item,'tnrTyp')}}</div>
                                </td>
                                -->
                                <td>
                                    <div v-show="item.show">
                                        <a @click="selectFee(item)">请选择</a>
                                    </div>

                                    <div v-show="!item.show" class="select-block" v-bind:class="{'selected':item.checkFee}">
                                        <span class="select-btn" @mouseover="check(item)" @mouseout="checkOut(item)">查看</span>
                                        <div v-show="item.checkFee" class="fee-list">
                                            <ul>
                                                <li v-for="fee in item.selList">{{fee.feeDesc}}</li>
                                            </ul>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="text-center">
                                        <a v-show="!item.show" class="layui-btn layui-btn-normal layui-btn-sm" @click="installmentEdit(item)">编辑</a>
                                        <a v-show="item.show" class="layui-btn layui-btn-normal layui-btn-sm" @click="installmentEditSave(item)">保存</a>
                                        <a class="layui-btn layui-btn-danger layui-btn-sm" @click="installmentDel(item)">删除</a>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="layui-form-item text-center">
                    <a class="layui-btn layui-btn-normal" lay-submit="" lay-filter="cal">测算</a>
                    <a class="layui-btn layui-btn-primary " lay-submit="" lay-filter="save">保存测算</a>
                    <a href="javascript:" class="layui-btn layui-btn-danger layui-layer-close layui-layer-close1">不保存</a>
                </div>
            </div>
            <div class="layui-form-item part show-part" v-show="tnrListShow">
                <blockquote class="layui-elem-quote">还款计划</blockquote>
                <div class="layui-tab" lay-filter="exchangeTur">
                    <ul class="layui-tab-title">
                        <li v-for="(tnr,index) in calculation_tnr" v-bind:lay-id="index" v-bind:class="{'layui-this':index==0}">{{tnr}}期</li>
                    </ul>
                    <div class="layui-tab-content">
                        <div class="layui-tab-item" v-bind:class="{'layui-show':index==0}" v-for="(tnr,index) in calculation_tnr">
                            <table class="layui-table">
                                <thead>
                                <tr>
                                    <th>期号</th>
                                    <th>应归还本金</th>
                                    <th>应归还利息</th>
                                    <th>利率</th>
                                    <th>罚息利率</th>
                                    <th>到期日</th>
                                    <th>剩余本金</th>
                                    <th>应还费用</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr v-for="plan in calculation_plan">
                                    <td>{{plan.perd_NO}}期</td>
                                    <td>{{plan.prcp_AMT}}</td>
                                    <td>{{plan.normint}}</td>
                                    <td>{{plan['intrate']}}</td>
                                    <td>{{plan.od_INTRATE}}</td>
                                    <td>{{plan.due_DT}}</td>
                                    <td>{{plan.ps_REM_PRCP}}</td>
                                    <td>{{plan.ps_FEE_AMT}}</td>
                                </tr>
                                </tbody>
                            </table>
                            <blockquote class="layui-elem-quote">费用配置</blockquote>
                            <div class="layui-tab" lay-filter="exchangeFee">
                                <ul class="layui-tab-title">
                                    <li class="layui-elip" :title="fee" v-for="(fee,index) in calculation_fee" v-bind:lay-id="index" v-bind:class="{'layui-this':index==0}">{{fee}}</li>
                                </ul>
                                <div class="layui-tab-content">
                                    <div class="layui-tab-item" v-bind:class="{'layui-show':index==0}" v-for="(tnr,index) in calculation_tnr">
                                        <div class="list-scroll">
                                            <table class="layui-table">
                                                <thead>
                                                <tr>
                                                    <th v-for="item in fee_item">{{item.name}}</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td v-for="item in fee_item">{{item.value}}</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="list-scroll" v-show="fee_condition_list">
                                            <table class="layui-table">
                                                <thead>
                                                <tr>
                                                    <th>收取类型</th>
                                                    <th>支持最小期限</th>
                                                    <th>支持最大期限</th>
                                                    <th>贷款最小金额（含）</th>
                                                    <th>贷款最大金额（含）</th>
                                                    <th>期限单位</th>
                                                    <th>计算类型</th>
                                                    <th>计算基础</th>
                                                    <th>开始期数</th>
                                                    <th>结束期数</th>
                                                    <th>费用比例</th>
                                                    <th>费用金额</th>
                                                    <th>最低费用</th>
                                                    <th>最高费用</th>
                                                    <th>收取方</th>
                                                    <th>是否摊销</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr v-for='fc in fee_condition_list'>
                                                    <td>{{fc.feeTnrName}}</td>
                                                    <td>{{fc.feeMinTnr}}</td>
                                                    <td>{{fc.feeMaxTnr}}</td>
                                                    <td>{{fc.loanMinAmt}}</td>
                                                    <td>{{fc.loanMaxAmt}}</td>
                                                    <td>{{fc.tnrUnitName}}</td>
                                                    <td>{{fc.feeActionName}}</td>
                                                    <td>{{fc.feePctBaseName}}</td>
                                                    <td>{{fc.feeTnrStr}}</td>
                                                    <td>{{fc.feeTnrEnd}}</td>
                                                    <td>{{fc.feePct}}</td>
                                                    <td>{{fc.feeFixAmt}}</td>
                                                    <td>{{fc.feeMinAmt}}</td>
                                                    <td>{{fc.feeMaxAmt}}</td>
                                                    <td>{{fc.feeResourceName}}</td>
                                                    <td>{{fc.feeAccIndName}}</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <blockquote class="layui-elem-quote">测算结果</blockquote>
                <div class="text-center list-scroll">
                    <table class="layui-table">
                        <thead>
                        <tr>
                            <th>期数</th>
                            <th>IRR%</th>
                            <th>贷款本金</th>
                            <th>现金流入</th>
                            <th>融资成本</th>
                            <th>审核成本</th>
                            <th>风险成本</th>
                            <th>运营成本</th>

                            <th>获客成本</th>
                            <th>其他直接成本</th>
                            <th>税</th>
                            <th>利润总额</th>
                            <th>现金流入%</th>
                            <th>融资成本%</th>
                            <th>审核成本%</th>
                            <th>风险成本%</th>
                            <th>运营成本%</th>
                            <th>获客成本%</th>
                            <th>其他直接成本%</th>
                            <th>利润总额%</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="ex in EX_list">
                            <td>{{ex.TNR}}</td>
                            <td>{{ex.EX39}}</td>
                            <td>{{ex.ORIGPRCP}}</td>
                            <td>{{ex.XJLR}}</td>
                            <td>{{ex.EX18}}</td>
                            <td>{{ex.EX29}}</td>
                            <td>{{ex.EX22}}</td>
                            <td>{{ex.EX31}}</td>

                            <td>{{ex.EX28}}</td>
                            <td>{{ex.OTHER}}</td>

                            <td>{{ex.EX37}}</td>
                            <td>{{ex.TOTALPROFIT}}</td>

                            <td>{{ex.XJLRPER}}</td>
                            <td>{{ex.EX18PER}}</td>
                            <td>{{ex.EX29PER}}</td>
                            <td>{{ex.EX22PER}}</td>
                            <td>{{ex.EX31PER}}</td>

                            <td>{{ex.EX28PER}}</td>
                            <td>{{ex.OTHERPER}}</td>
                            <td>{{ex.TOTALPROFITPER}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </form>
    <div id="selectFee" style="display: none;">
        <div class="layui-form-item">
            <div class="layui-inline">
                <input class="layui-input" type="text" v-model="feeDesc" placeholder="请输入费用名称">
            </div>
            <button class="layui-btn layui-btn-normal" @click="searchFee">查找</button>
        </div>
        <div v-show="feeTableShow">
            <div class="show-list">
                <div class="table-block">
                    <table class="layui-table">
                        <colgroup>
                            <col width="100">
                            <col>
                        </colgroup>
                        <thead>
                        <tr>
                            <th>费用编码</th>
                            <th>费用名称</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="item in fee_list" @click="addToSelected(item)">
                            <td>{{item.feeCde}}</td>
                            <td>{{item.feeDesc}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div id="selectPage"></div>
            </div>
            <div class="selected-list">
                <blockquote class="layui-elem-quote">已选</blockquote>
                <table class="layui-table" lay-skin="line">

                    <thead>
                    <tr>
                        <th width="50">编码</th>
                        <th width="500">名称</th>
                        <th width="100">操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr v-for="item in feeSel_list">
                        <td width="30">{{item.feeCde}}<i class="layui-btn layui-btn-sm opa"></i></td>
                        <td width="270" class="hidden">{{item.feeDesc}}<i class="layui-btn layui-btn-sm opa"></i></td>
                        <td width="50"><a class="layui-btn layui-btn-danger layui-btn-sm" @click="removeSelFee(item)">撤销</a></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="layui-form-item text-center">
            <a class="layui-btn layui-btn-normal" lay-submit="" lay-filter="addFee">确定</a>
        </div>
    </div>
    <div class="load" v-show="load"></div>
</div>